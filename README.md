# Cognitoken-Verifier
A Nodejs package to simplify the validation process of JWT generated by AWS Cognito as prescribed in https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-verifying-a-jwt.html

## Summary

1. Retrieve User Pool public keys from https://cognito-idp.REGION-ID.amazonaws.com/.well-known/jwks.json and store in node-cache.

2. Performs full verification of Access Token or Id Token generated by AWS Cognito according to documentation.

# Install
```bash
npm install cognitoken-verifier @types/cognitoken-verifier
```

# Usage
```javascript
const { CognitokenVerifyService } = require('cognitoken-verifier');

// Required params
const appClientId = '<XXXXXXXX>'; // Only for idToken
const userPoolId = 'ap-southeat-1_XXXXXX';


const verifier = new CognitokenVerifyService(appClientId, userPoolId);

const IdToken = "XXXXXXXXXXX";
verifier.verify(idToken).then((payload)=>{
    // payload.sub
})

const accessToken = "XXXXXXX";
verifier.verify(accessToken).then((payload)=>{
    // payload.sub
})
```
